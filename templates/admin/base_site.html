{% extends "unfold/layouts/base.html" %}
{% load static %} {# IMPORTANT: Load static tags #}

{% block extra_head %}
{{ block.super }}
<style>
    /* Fixed styles that don't need dynamic logic */
    .school-subtitle {
        font-size: 7.5px !important; 
        font-weight: 900 !important;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        line-height: 1;
        max-width: 130px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        margin-top: 2px;
    }

    .brand-logo-box {
        height: 24px; 
        width: 24px; 
        object-fit: contain;
        background: white;
        border-radius: 6px;
        padding: 2px;
        border: 1px solid #f1f5f9;
    }
    .flex-col.min-w-0 { min-width: 140px; }
</style>
{% endblock %}

{% block branding %}
<div class="flex items-center gap-2 py-1 overflow-hidden" 
     style="--dynamic-color: {% if user.userprofile and user.userprofile.school.color %}{{ user.userprofile.school.color }}{% else %}#0D7313{% endif %};">
    
    {% if user.userprofile and user.userprofile.school.icon %}
        <img src="{{ user.userprofile.school.icon.url }}" class="shrink-0"
             style="width: 28px; height: 28px; border-radius: 4px; object-fit: contain;">
    {% else %}
    <img src="{% static 'images/icon.png' %}" class="brand-logo-box shrink-0" style="width: 28px; height: 28px;">
    {% endif %}

    <div class="flex flex-col justify-center min-w-0">
        <span class="school-subtitle font-bold truncate" style="color: var(--dynamic-color) !important; font-size: 13px !important;">
            {% if user.userprofile and user.userprofile.school %}{{ user.userprofile.school.name }}{% else %}JustCBT{% endif %}
        </span>
        <span class="font-medium text-slate-500 uppercase tracking-tight truncate " style="color: gray !important; font-size: 9px !important;">
            {% if user.userprofile and user.userprofile.school %}{{ user.userprofile.school.email }}{% else %}Administrator{% endif %}
        </span>
    </div>
</div>
{% endblock %}