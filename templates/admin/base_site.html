{% extends "unfold/layouts/base.html" %}
{% load static %} {# IMPORTANT: Load static tags #}

{% block extra_head %}
{{ block.super }}
<style>
    /* Fixed styles that don't need dynamic logic */
    .school-subtitle {
        font-size: 7.5px !important; 
        font-weight: 900 !important;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        line-height: 1;
        max-width: 130px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        display: block;
        margin-top: 2px;
    }

    .brand-logo-box {
        height: 24px; 
        width: 24px; 
        object-fit: contain;
        background: white;
        border-radius: 6px;
        padding: 2px;
        border: 1px solid #f1f5f9;
    }
</style>
{% endblock %}

{% block branding %}
{# We set the color variable here in a standard HTML attribute to avoid CSS parsing errors #}
<div class="flex items-center gap-2 py-1" 
     style="--dynamic-color: {% if user.userprofile.school.color %}{{ user.userprofile.school.color }}{% else %}#0D7313{% endif %};">

    <img src="{% static 'images/icon.png' %}" 
         class="brand-logo-box" 
         style="width: 28px; height: 28px;">

    <div class="h-6 w-px bg-slate-200 mx-1"></div>
    
    {% if user.userprofile.school.icon %}
        <img src="{{ user.userprofile.school.icon.url }}" 
             style="width: 28px; height: 28px; border-radius: 4px; object-fit: contain;">
    {% endif %}

    <div class="flex flex-col justify-center text-sm ml-1">
        <span class="school-subtitle" style="color: var(--dynamic-color) !important;">
            {{ user.userprofile.school.name|default:"JustCBT" }}
        </span>
        <span class="text-[10px] font-bold text-slate-500 uppercase tracking-widest">
            {{ user.userprofile.school.email|default:"Portal" }}
        </span>
    </div>
</div>
{% endblock %}