{% extends "admin/base_site.html" %}
{% block content %}
<h2>Manual Grading: {{ exam.title }}</h2>

<form method="post">
    {% csrf_token %}
    <table style="width:100%; border-collapse: collapse;">
        <thead>
            <tr style="background: #79aec8; color: white; text-align: left;">
                <th style="padding: 10px;">Student</th>
                <th style="padding: 10px;">Question #</th>
                <th style="padding: 10px; width: 40%;">Student's Response</th>
                <th style="padding: 10px;">Award Mark</th>
            </tr>
        </thead>
        <tbody>
            {% for answer in answers %}
            <tr style="border-bottom: 1px solid #ddd;">
                <td style="padding: 10px;">{{ answer.user.get_full_name }} ({{ answer.user.username }})</td>
                <td style="padding: 10px;">Q{{ answer.question.question_number }}</td>
                <td style="padding: 10px;">
                    <blockquote style="background: #f9f9f9; padding: 10px; border-left: 5px solid #ccc; margin: 0;">
                        {{ answer.answer_text|linebreaks }}
                    </blockquote>
                </td>
                <td style="padding: 10px;">
                    <input type="number" step="0.5" name="score_{{ answer.id }}" 
                           placeholder="0.0" style="width: 60px; padding: 5px;">
                    / {{ answer.question.max_points|default:"10" }}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="padding: 20px; text-align: center;">No ungraded essays found for this exam.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    {% if answers %}
    <div class="submit-row" style="margin-top: 20px;">
        <input type="submit" value="Save All Grades" class="default" style="background: #417690; color: white; padding: 10px 20px; border: none; cursor: pointer;">
    </div>
    {% endif %}
</form>
{% endblock %}